(this["webpackJsonpcrud-firebase"]=this["webpackJsonpcrud-firebase"]||[]).push([[0],{217:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(47),c=n.n(r),i=n(26),s=n(30),o=n(5),l=n(7),u=n.n(l),d=n(18),b=n(9),p=n(49);n(218);p.a.initializeApp({apiKey:"AIzaSyAgoNYKhf4uA-iyNCe2TUi1PCDyj5Wxnig",authDomain:"pets-b7940.firebaseapp.com",projectId:"pets-b7940",storageBucket:"pets-b7940.appspot.com",messagingSenderId:"291360299657",appId:"1:291360299657:web:a85086a9f2102218774458"});var j=p.a.firestore(),f="[Dog] New Dog",m="[Dog] Load Dog",h="[Dog] Delete Dog",x="[Dog] Active Dog",O="[Dog] Clear Dog",v=n(19),g=n.n(v),y=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.collection("/Dog").get();case 2:return n=e.sent,a=[],n.forEach((function(e){a.push(Object(b.a)({id:e.id},e.data()))})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/dfdibw2mk/image/upload",(n=new FormData).append("upload_preset","test-clase"),n.append("file",t),e.prev=4,e.next=7,fetch("https://api.cloudinary.com/v1_1/dfdibw2mk/image/upload",{method:"POST",body:n});case 7:if(!(a=e.sent).ok){e.next=15;break}return e.next=11,a.json();case 11:return r=e.sent,e.abrupt("return",r.secure_url);case 15:return e.next=17,a.json();case 17:throw e.sent;case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(4),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t){return e.apply(this,arguments)}}(),N=[],k=function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g.a.fire({title:"Uploading...",text:"Please wait ...",allowOutsideClick:!1,onBeforeOpen:function(){g.a.showLoading()}}),t.next=3,w(e);case 3:return N=t.sent,g.a.close(),t.abrupt("return",N);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},C=function(e){return{type:f,payload:Object(b.a)({},e)}},D=function(){return function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:n=e.sent,t(S(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=function(e){return{type:m,payload:e}},_=function(e){return{type:h,payload:e}},E=function(){return{type:O}},P=n(96),B=n(40),I=n(2),A=function(){var e=Object(i.c)((function(e){return e.dog})).active,t=Object(a.useRef)(e.id),n=Object(P.a)({initialValues:Object(b.a)({},e),validationSchema:B.a({name:B.b().required(),description:B.b().required(),url:B.b().required()}),onSubmit:function(t){var a,c;""===e.name?(r((c=t,function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:c.url,name:c.name,description:c.description},e.prev=1,e.next=4,j.collection("/Dog").doc().set(n);case 4:g.a.fire({position:"top-end",text:"Perro Creado",icon:"success",title:c.name,showConfirmButton:!1,timer:1500}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),g.a.fire({icon:"error",title:"Oops...",text:e.t0,footer:""});case 10:t(C(n)),t(D());case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}())),n.resetForm()):""!==e.id&&r((a=t,function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.url||delete a.url,n={url:a.url,name:a.name,description:a.description},delete Object(b.a)({},n).id,g.a.fire({title:"Uploading...",text:"Please wait ...",allowOutsideClick:!1,onBeforeOpen:function(){g.a.showLoading()}}),e.next=7,j.doc("/Dog/".concat(a.id)).update(n);case 7:g.a.fire("Saved",a.name,"success"),t(D()),t(E());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}});Object(a.useEffect)((function(){e.id!==t.current&&n.resetForm(),t.current=e.id}),[e,n]);var r=Object(i.b)(),c=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.files[0]){e.next=7;break}return e.next=3,r(k(t.target.files[0]));case 3:a=e.sent,document.getElementById("fileinput").value=a,n.values.url=a;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsx)("div",{className:"d-flex justify-content-center",children:Object(I.jsxs)("div",{className:"col-md-4 text-center py-3",children:[Object(I.jsx)("img",{src:"https://res.cloudinary.com/db9wh5uvt/image/upload/v1625536708/perros_e1bfpk.png",className:"App-logo ",alt:"logo"}),Object(I.jsxs)("form",{onSubmit:n.handleSubmit,className:"card card-body border-primary",children:[Object(I.jsxs)("div",{className:"form-group input-group ",children:[Object(I.jsx)("div",{className:"btn border-bottom shadow-sm input-group-text bg-light",value:"Picture",onClick:function(){document.querySelector("#fileSelector").click()},children:Object(I.jsx)("i",{className:"material-icons",children:"insert_link"})}),Object(I.jsx)("input",{type:"text",className:"form-control",placeholder:"Url",name:"url",disabled:!0,id:"fileinput",value:n.values.url,onChange:n.handleChange}),Object(I.jsx)("input",{id:"fileSelector",type:"file",name:"file",style:{display:"none"},onChange:c})]}),Object(I.jsxs)("div",{className:"form-group input-group",children:[Object(I.jsx)("div",{className:"input-group-text bg-light",children:Object(I.jsx)("i",{className:"material-icons",children:"create"})}),Object(I.jsx)("input",{type:"text",name:"name",placeholder:"Name",className:"form-control",value:n.values.name,onChange:n.handleChange})]}),Object(I.jsx)("div",{className:"form-group mt-3",children:Object(I.jsx)("textarea",{rows:"3",className:"form-control",placeholder:"Write a Description",name:"description",value:n.values.description,onChange:n.handleChange})}),Object(I.jsx)("button",{className:"btn btn-dark mt-3",children:"Save"})]})]})})},L=n(31),T=function(e){return function(t){return t.name.toLowerCase().includes(e)||!e}},U=function(){var e=Object(i.b)(),t=Object(o.g)(),n=Object(i.c)((function(e){return e.dog})).dog,r=Object(a.useState)(""),c=Object(L.a)(r,2),s=c[0],l=c[1];Object(a.useEffect)((function(){e(D())}),[e]);var p=function(t){e(function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.doc("Dog/".concat(e)).delete();case 2:n(_(e)),g.a.fire({position:"top-end",icon:"success",title:"Delete",showConfirmButton:!1,timer:1500}),n(D());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},f=function(n){e(function(e){return{type:x,payload:Object(b.a)({},e)}}(n)),t.push("/edit")};return Object(I.jsxs)("div",{children:[Object(I.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary",children:Object(I.jsx)("div",{className:"container-fluid d-flex justify-content-end",children:Object(I.jsxs)("form",{className:"d-flex justify-content-end",children:[Object(I.jsx)("input",{className:"form-control me-sm-2",type:"text",placeholder:"Search",name:"term",onChange:function(e){return l(e.target.value.toLowerCase())}}),Object(I.jsx)("button",{className:"btn btn-secondary my-2 my-sm-0",type:"submit",children:"Search"})]})})}),Object(I.jsx)("div",{className:"d-flex flex-wrap",children:n.filter(T(s)).map((function(e,t){return Object(I.jsx)("div",{className:"col-6 col-md-4",children:Object(I.jsx)("div",{className:"card mb-1",children:Object(I.jsxs)("div",{className:"card-body",children:[Object(I.jsx)("div",{className:"d-flex justify-content-center",children:Object(I.jsx)("h4",{children:e.name})}),Object(I.jsxs)("div",{className:"d-flex justify-content-center flex-column align-items-center",children:[Object(I.jsx)("p",{children:e.description}),Object(I.jsx)("img",{src:e.url,alt:"",width:"230px"})]}),Object(I.jsxs)("div",{className:"d-flex justify-content-around m-2",children:[Object(I.jsx)("i",{className:"material-icons text-dark btn btn-danger font-weight-bold",onClick:function(){return p(e.id)},children:"close"}),Object(I.jsx)("i",{className:"material-icons btn btn-success",onClick:function(){return f(e)},children:"create"})]})]})})},"".concat(t,"-").concat(e.id))}))})]})},q=function(){return Object(I.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary",children:Object(I.jsxs)("div",{className:"container-fluid",children:[Object(I.jsx)(s.b,{to:"/",className:"navbar-brand",href:"#",children:"Pets"}),Object(I.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarColor01","aria-controls":"navbarColor01","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(I.jsx)("span",{className:"navbar-toggler-icon"})}),Object(I.jsx)("div",{className:"collapse navbar-collapse",id:"navbarColor01",children:Object(I.jsxs)("ul",{className:"navbar-nav me-auto",children:[Object(I.jsx)("li",{className:"nav-item",children:Object(I.jsx)(s.b,{to:"/",className:"nav-link active",href:"#",children:"Home"})}),Object(I.jsx)("li",{className:"nav-item",children:Object(I.jsx)(s.b,{to:"/edit",className:"nav-link",href:"#",children:"Edit"})})]})})]})})},F=(n(216),function(){return Object(I.jsxs)(s.a,{children:[Object(I.jsx)(q,{}),Object(I.jsxs)(o.d,{children:[Object(I.jsx)(o.b,{exact:!0,path:"/",component:U}),Object(I.jsx)(o.b,{exact:!0,path:"/edit",component:A}),Object(I.jsx)(o.a,{to:"/"})]})]})}),z=n(220),J=n(95),K=n(12),R={dog:[],active:{url:"",name:"",description:""}},V="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||z.c,W=Object(z.b)({dog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(b.a)(Object(b.a)({},e),{},{dog:[t.payload].concat(Object(K.a)(e.dog))});case m:return Object(b.a)(Object(b.a)({},e),{},{dog:Object(K.a)(t.payload)});case x:return Object(b.a)(Object(b.a)({},e),{},{active:Object(b.a)({},t.payload)});case O:return Object(b.a)(Object(b.a)({},e),{},{active:{url:"",name:"",description:""}});default:return e}}}),X=Object(z.d)(W,V(Object(z.a)(J.a)));c.a.render(Object(I.jsx)(i.a,{store:X,children:Object(I.jsx)(F,{})}),document.getElementById("root"))}},[[217,1,2]]]);
//# sourceMappingURL=main.b5627631.chunk.js.map